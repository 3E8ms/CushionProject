<!DOCTYPE html>
 
<head>
    <meta charset="utf-8" />
</head>
<body>
    <h1>Input a URL down below</h1>
    <input type="url" id="url" name="url"><br>
    <input type="submit" value="Submit" onclick="query()">

    <div id="result"></div>
</body>

<script>
  function query(){
    const puppeteer = require('puppeteer')
  /*  const text = document.querySelector('.textfield').value
    fetch(url,{
      method: 'POST',
      headers:{
        'Content-Type':'application/json',
      },
      body: JSON.stringify({text})
    })*/
    const url = document.getElementById("url").value;
    if (!isValidUrl(url)) {
      alert ("url not valid");
      return;
    }
    alert(`Querying data from url ${url}`);
    const urlResult = scrapeText(url)
    console.log(urlResult)
  }
  function newText(text){
    const el = document.createTextNode(text)
    return el;
  }
  async function loadPage(){
    const ctr = document.querySelector('.container');
    const textField = newText('div',{class: 'text'});
  }
  
  /*
  document.getElementById("urlQuery").addEventListener("submit", query);
  function query() {
    
      document.getElementById("result").innerHTML = urlResult;
     // document.getElementById("url").value = null;
     */
    

  function getPageFromURL(url) {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", url, true);
    xmlHttp.send();
    return xmlHttp.responseText;
    
    
  }

  function getWordFrequency(text) { // input: string, output: dict
    // implement
    // {word: frequency}
    // return {"test": 10, "test2": 8};
  }

  function getResultHTML(count) {
    let result = "";
    for (const k in count) {
      result += `<div>${k}: ${count[k]}</div>`;
    }
    return result;
  }

  function isValidUrl(string) {
    try {
      new URL(string);
    } catch (_) {
      return false;  
    }

    return true;
  }
</script>
</html>